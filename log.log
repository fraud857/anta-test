25/11/27 17:34:04 INFO RetryInvocationHandler: Call From cyber-worker-test-8574cd4775-m8xkp/10.131.15.83 to mrs-adp-q02-node-master2femp.mrs-h69n.com:8032 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused, while invoking ApplicationClientProtocolPBClientImpl.getNewApplication over 18 after 19 failover attempts. Trying to failover after sleeping for 42745ms.
25/11/27 17:34:47 INFO ConfiguredRMFailoverProxyProvider: Failing over to 19
25/11/27 17:34:47 INFO RetryInvocationHandler: DestHost:destPort mrs-adp-q02-node-master3qkoz.mrs-h69n.com:8032 , LocalHost:localPort cyber-worker-test-8574cd4775-m8xkp/10.131.15.83:0. Failed on local exception: java.io.IOException: Couldn't set up IO streams: java.lang.IllegalArgumentException: Server has invalid Kerberos principal: mapred/hadoop.950c233d_ab6e_4ad9_ab28_f2766f074340.com@B2D05EE0_E921_40A8_A6FD_DCB7693B106B.COM, expecting: mapred/hadoop.950c233d_ab6e_4ad9_ab28_f2766f074340.com@950C233D_AB6E_4AD9_AB28_F2766F074340.COM, while invoking ApplicationClientProtocolPBClientImpl.getNewApplication over 19 after 20 failover attempts. Trying to failover after sleeping for 33880ms.



2025-11-17 14:09:38.002 ERROR [cyber-platform] [http-nio-7600-exec-113] [] com.datacyber.cyberdata.service.core.exception.CoreExceptionHandler - Exception: request: /standard/field/export/template raised List validation with explicit values must specify at least one value
java.lang.IllegalArgumentException: List validation with explicit values must specify at least one value
        at org.apache.poi.xssf.usermodel.XSSFDataValidationConstraint.<init>(XSSFDataValidationConstraint.java:50)
        at org.apache.poi.xssf.usermodel.XSSFDataValidationHelper.createExplicitListConstraint(XSSFDataValidationHelper.java:66)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl.addDropdownToColumn(DdsFieldServiceImpl.java:1881)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl.access$000(DdsFieldServiceImpl.java:127)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl$2.afterSheetCreate(DdsFieldServiceImpl.java:1799)
        at com.alibaba.excel.write.handler.SheetWriteHandler.afterSheetCreate(SheetWriteHandler.java:37)
        at com.alibaba.excel.write.handler.chain.SheetHandlerExecutionChain.afterSheetCreate(SheetHandlerExecutionChain.java:40)
        at com.alibaba.excel.util.WriteHandlerUtils.afterSheetCreate(WriteHandlerUtils.java:98)
        at com.alibaba.excel.util.WriteHandlerUtils.afterSheetCreate(WriteHandlerUtils.java:92)
        at com.alibaba.excel.context.WriteContextImpl.initSheet(WriteContextImpl.java:206)
        at com.alibaba.excel.context.WriteContextImpl.currentSheet(WriteContextImpl.java:135)
        at com.alibaba.excel.write.ExcelBuilderImpl.addContent(ExcelBuilderImpl.java:54)
        at com.alibaba.excel.ExcelWriter.write(ExcelWriter.java:73)
        at com.alibaba.excel.ExcelWriter.write(ExcelWriter.java:50)
        at com.alibaba.excel.write.builder.ExcelWriterSheetBuilder.doWrite(ExcelWriterSheetBuilder.java:62)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl.downloadWithDynamicHead(DdsFieldServiceImpl.java:1689)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl.exportTemplate(DdsFieldServiceImpl.java:1565)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl$$FastClassBySpringCGLIB$$a47b2c4.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
        at com.datacyber.cyberdata.service.dds.service.impl.DdsFieldServiceImpl$$EnhancerBySpringCGLIB$$69b87128.exportTemplate(<generated>)
        at com.datacyber.cyberdata.controller.dds.DdsFieldController.exportTemplate(DdsFieldController.java:230)
        at com.datacyber.cyberdata.controller.dds.DdsFieldController$$FastClassBySpringCGLIB$$870c4379.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
        at com.datacyber.cyberdata.common.aspect.AESCryptoOperationAop.aesOperation(AESCryptoOperationAop.java:49)
        at jdk.internal.reflect.GeneratedMethodAccessor184.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
        at com.datacyber.cyberdata.controller.dds.DdsFieldController$$EnhancerBySpringCGLIB$$8e2984ab.exportTemplate(<generated>)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at com.datacyber.cyberdata.service.filter.LicenseRoleAuthorizationFilter.doFilterInternal(LicenseRoleAuthorizationFilter.java:79)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at com.datacyber.cyber.user.sdk.filter.JwtAuthenticationTokenFilter.doFilterInternal(JwtAuthenticationTokenFilter.java:83)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at datadog.trace.instrumentation.springweb.HandlerMappingResourceNameFilter.doFilterInternal(HandlerMappingResourceNameFilter.java:50)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at com.datacyber.cyber.user.sdk.filter.ExceptionFilter.doFilterInternal(ExceptionFilter.java:22)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:56)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:765)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcesso



[2025-11-05 18:37:45.132] [traceId=54da77d1663e065339dd72a429c8ed56 spanId=752087985961214363] [service=cyber-usercenter-test ] [c.d.c.u.s.s.impl.SysDataServiceImpl] [http-nio-8080-exec-6] [ERROR] Failed to get token from /sdkAuth/getToken: 400 : "<!doctype html><html lang="en"><head><title>HTTP Status 400 – Bad Request</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 400 – Bad Request</h1></body></html>"







https://cnp.anta.com/kpanda/clusters/

http://10.131.128.80:7799/api/tenant/mrs/user/export?managerUrl=https://10.131.194.230:9022/mrsmanager/&password=km72QG3Npy!1&username=u_adp_manager



https://authtest.anta.com/logout?service=https://authtest.anta.com/oauth2.0/authorize?response_type=code&client_id=100264&redirect_uri=https://adp-test.anta.com/index


[2025-09-23 10:32:42.316] [traceId=cca5ec05f94c96e4feeb01a510f4be7d spanId=748098214889791199] [service=cyber-worker-test ] [c.d.c.w.a.s.DatasourceQueryService] [http-nio-7800-exec-5] [INFO ] datasourceQuery enter: {"env":"dev","info":{"baseInputParamModelsJson":"[]","database":"poc_test","datasourceConnectionJson":"{\"catalogName\":\"doris_test\",\"collectSwitch\":1,\"connectivityInfo\":\"{\\\"connectivityStatus\\\":true,\\\"errorMessage\\\":\\\"\\\",\\\"resourceGroupId\\\":1,\\\"testTime\\\":\\\"2025-09-22T09:23:14.652\\\"}\",\"connectivityStatus\":1,\"createEngineSwitch\":1,\"createTime\":\"2025-09-19T11:25:13\",\"createUser\":1,\"datasourceId\":1968879021349781506,\"detail\":\"{\\\"feAddress\\\":[\\\"18030\\\"],\\\"password\\\":\\\"/+PcZuJ8EnhfeBU1kxMNow==\\\",\\\"starRocksFEAddress\\\":\\\"18030\\\",\\\"url\\\":\\\"jdbc:mysql://192.168.99.9:19030/\\\",\\\"username\\\":\\\"poc_test\\\"}\",\"env\":2,\"host\":\"192.168.99.9\",\"id\":1968879021840515074,\"port\":\"19030\",\"state\":1,\"testTime\":\"2025-09-22T09:23:15\",\"updateTime\":\"2025-09-19T11:25:13\"}","datasourceJson":"{\"createTime\":\"2025-09-19T11:25:13\",\"createUser\":1,\"customProperties\":\"[]\",\"description\":\"\",\"id\":1968879021349781506,\"isFreeze\":0,\"mode\":2,\"name\":\"doris_test\",\"state\":1,\"tenantId\":1001,\"type\":\"DORIS\",\"updateTime\":\"2025-09-19T11:25:13\",\"updateUser\":1,\"version\":0}","isFromWizardl":true,"mode":2,"outputParamModelsJson":"[{\"fieldName\":\"id\",\"fieldType\":\"INT\",\"isPaging\":false,\"sampleVale\":\"\"},{\"fieldName\":\"yearNum\",\"fieldType\":\"INT\",\"isPaging\":false,\"sampleVale\":\"\"},{\"fieldName\":\"monthNum\",\"fieldType\":\"STRING\",\"isPaging\":false,\"sampleVale\":\"\"}]","page":true,"sourceSupportEnum":"DORIS","sql":"SELECT * FROM ( SELECT `id`, `yearNum`, `monthNum` FROM `dim_date2`  ) t LIMIT 10 OFFSET 0","test":true,"totalSql":"SELECT count(*) AS total FROM ( SELECT `id`, `yearNum`, `monthNum` FROM `dim_date2` ) t","userId":48},"methodType":"API_SERVER_SQL","requestId":1758594762308,"resourceGroupId":1,"taskType":"DATASOURCE_QUERY"}









[2025-09-23 09:32:07.684] [traceId=ec22eafa680e1d9be7ac9d21e3c973d3 spanId=6230099790631525190] [service=cyber-worker-test ] [c.d.c.w.a.s.DatasourceQueryService] [http-nio-7800-exec-7] [INFO ] datasourceQuery enter: {"env":"prod","info":{"baseInputParamModelsJson":"[]","datasourceConnectionJson":"{\"catalogName\":\"doris_test\",\"collectSwitch\":1,\"connectivityInfo\":\"{\\\"connectivityStatus\\\":true,\\\"errorMessage\\\":\\\"\\\",\\\"resourceGroupId\\\":1,\\\"testTime\\\":\\\"2025-09-22T09:23:08.297\\\"}\",\"connectivityStatus\":1,\"createEngineSwitch\":1,\"createTime\":\"2025-09-19T11:25:14\",\"createUser\":1,\"datasourceId\":1968879021349781506,\"detail\":\"{\\\"feAddress\\\":[\\\"18030\\\"],\\\"password\\\":\\\"/+PcZuJ8EnhfeBU1kxMNow==\\\",\\\"starRocksFEAddress\\\":\\\"18030\\\",\\\"url\\\":\\\"jdbc:mysql://192.168.99.9:19030/\\\",\\\"username\\\":\\\"poc_test\\\"}\",\"env\":5,\"host\":\"192.168.99.9\",\"id\":1968879022507409409,\"port\":\"19030\",\"state\":1,\"testTime\":\"2025-09-22T09:23:08\",\"updateTime\":\"2025-09-19T11:25:13\"}","datasourceJson":"{\"createTime\":\"2025-09-19T11:25:13\",\"createUser\":1,\"customProperties\":\"[]\",\"description\":\"\",\"id\":1968879021349781506,\"isFreeze\":0,\"mode\":2,\"name\":\"doris_test\",\"state\":1,\"tenantId\":1001,\"type\":\"DORIS\",\"updateTime\":\"2025-09-19T11:25:13\",\"updateUser\":1,\"version\":0}","isFromWizardl":true,"mode":2,"outputParamModelsJson":"[{\"fieldName\":\"id\",\"fieldType\":\"INT\",\"isPaging\":false,\"sampleVale\":\"\"},{\"fieldName\":\"yearNum\",\"fieldType\":\"INT\",\"isPaging\":false,\"sampleVale\":\"\"},{\"fieldName\":\"monthNum\",\"fieldType\":\"STRING\",\"isPaging\":false,\"sampleVale\":\"\"}]","page":true,"sourceSupportEnum":"DORIS","sql":"SELECT * FROM ( SELECT `id`, `yearNum`, `monthNum` FROM `dim_date2`  ) t LIMIT 10 OFFSET 0","test":true,"totalSql":"SELECT count(*) AS total FROM ( SELECT `id`, `yearNum`, `monthNum` FROM `dim_date2` ) t","userId":48},"methodType":"API_SERVER_SQL","requestId":1758591127677,"resourceGroupId":1,"taskType":"DATASOURCE_QUERY"}



[2025-09-23 09:32:07.695] [traceId=ec22eafa680e1d9be7ac9d21e3c973d3 spanId=6230099790631525190] [service=cyber-worker-test ] [c.d.c.w.a.s.DatasourceQueryService] [http-nio-7800-exec-7] [ERROR] datasourceQuery failed: param:{"connInfo":{"dataSourceType":"DORIS","datasourceConnectionId":1968879022507409409,"jdbcUrl":"jdbc:mysql://192.168.99.9:19030/","password":"poctest.321","username":"poc_test","version":0},"env":"prod","info":{"baseInputParamModelsJson":"[]","datasourceConnectionJson":"{\"catalogName\":\"doris_test\",\"collectSwitch\":1,\"connectivityInfo\":\"{\\\"connectivityStatus\\\":true,\\\"errorMessage\\\":\\\"\\\",\\\"resourceGroupId\\\":1,\\\"testTime\\\":\\\"2025-09-22T09:23:08.297\\\"}\",\"connectivityStatus\":1,\"createEngineSwitch\":1,\"createTime\":\"2025-09-19T11:25:14\",\"createUser\":1,\"datasourceId\":1968879021349781506,\"detail\":\"{\\\"feAddress\\\":[\\\"18030\\\"],\\\"password\\\":\\\"/+PcZuJ8EnhfeBU1kxMNow==\\\",\\\"starRocksFEAddress\\\":\\\"18030\\\",\\\"url\\\":\\\"jdbc:mysql://192.168.99.9:19030/\\\",\\\"username\\\":\\\"poc_test\\\"}\",\"env\":5,\"host\":\"192.168.99.9\",\"id\":1968879022507409409,\"port\":\"19030\",\"state\":1,\"testTime\":\"2025-09-22T09:23:08\",\"updateTime\":\"2025-09-19T11:25:13\"}","datasourceJson":"{\"createTime\":\"2025-09-19T11:25:13\",\"createUser\":1,\"customProperties\":\"[]\",\"description\":\"\",\"id\":1968879021349781506,\"isFreeze\":0,\"mode\":2,\"name\":\"doris_test\",\"state\":1,\"tenantId\":1001,\"type\":\"DORIS\",\"updateTime\":\"2025-09-19T11:25:13\",\"updateUser\":1,\"version\":0}","isFromWizardl":true,"mode":2,"outputParamModelsJson":"[{\"fieldName\":\"id\",\"fieldType\":\"INT\",\"isPaging\":false,\"sampleVale\":\"\"},{\"fieldName\":\"yearNum\",\"fieldType\":\"INT\",\"isPaging\":false,\"sampleVale\":\"\"},{\"fieldName\":\"monthNum\",\"fieldType\":\"STRING\",\"isPaging\":false,\"sampleVale\":\"\"}]","page":true,"sourceSupportEnum":"DORIS","sql":"SELECT * FROM ( SELECT `id`, `yearNum`, `monthNum` FROM `dim_date2`  ) t LIMIT 10 OFFSET 0","test":true,"totalSql":"SELECT count(*) AS total FROM ( SELECT `id`, `yearNum`, `monthNum` FROM `dim_date2` ) t","userId":48},"methodType":"API_SERVER_SQL","requestId":1758591127677,"resourceGroupId":1,"taskType":"DATASOURCE_QUERY"}, ex:

java.sql.SQLException: errCode = 2, detailMessage = No database selected
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at com.datacyber.cyberdata.worker.api.service.DatasourceQueryService.getApiServerSqlQueryResult(DatasourceQueryService.java:276)
	at com.datacyber.cyberdata.worker.api.service.DatasourceQueryService.datasourceQuery(DatasourceQueryService.java:236)
	at com.datacyber.cyberdata.worker.api.controller.DatasourceController.datasourceQuery(DatasourceController.java:39)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at datadog.trace.instrumentation.springweb.HandlerMappingResourceNameFilter.doFilterInternal(HandlerMappingResourceNameFilter.java:50)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:56)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:765)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
